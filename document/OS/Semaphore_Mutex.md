# 세마포어 ( Semaphore ) 와 뮤텍스 ( Mutex ) 에 대해 기술 합니다.

# 개요

```

쓰레드들은 자원을 공유하고, 프로세스는 서로간의 메세지를 전송하면서

공유 된 자원에 대해 프로세스, 쓰레드가 동시에 접근하는 문제가 발생

공유 된 자원에 동시접근 하게되면 자원에 대한 신뢰도가 감소 할 수 있기 때문에

자원에 대한 무결성을 보존하기 위해 하나의 데이터는 한번에 하나의 프로세스만

접근 할 수 있도록 제한하기 위해 제안 된것이 Semaphore 입니다.
```

# 화장실 예시

```
공중 화장실이 있고 한번에 1명만 사용 할 수 있다고 가정합니다.

현재 사용자가 있는데 다른 사용자가 들어온다면 문제가 발생 할 것 입니다.

이를 방지하기 위해 열쇠 같은 장치를 만들어 열쇠를 가진 사용자만 이용하고

없는 사람은 사용자가 열쇠를 가지고 나올 때 까지 대기 하도록 하여

한 번에 여러 사용자가 이용 하는 사태를 방지 할 수 있습니다.
```

## 세마포어란?

```
공유 된 자원의 데이터를 여러 "프로세스"가 접근하는 것을 막는 것

세마포어는 화장실 예제에서 1개 이상의 열쇠를 나타내는 것과 같습니다.

만약 화장실이 n개고 열쇠가 n개 라면 N명까지는 대기 없이 이용하고

그 이후 부터는 대기하여 빈 열쇠가 생기는 것을 기다리는 것입니다.

세마포어의 개수를 잘 구성하여 OS의 리소스를 효율적으로 사용 하는 것이

중요한 이슈라고 할 수 있습니다.
```

## 뮤텍스란?

```
공유 된 자원의 데이터를 여러 "쓰레드"가 접근 하는 것을 막는 것

크리티컬 섹션을 가진 쓰레드가 러닝타임이 겹치지 않고 단독적으로 실행 되게 하는 기술

locking과 unlocking 을 사용하여 Mutex객체를 두 쓰레드가 동시에 사용 할 수 없도록

만드는 것 입니다.

화장실 예제에서 뮤텍스는 오직 1개의 열쇠만 가질 수 있습니다.
```

## 세마포어와 뮤택스의 차이점 ?

```

세마포어는 뮤텍스가 될 수 있음 / 뮤텍스는 세마포어가 될 수 없음

뮤텍스는 열쇠가 항상 1개이고 세마포어는 여러개 가질 수 있기 때문에

세마포어의 열쇠가 1개라면 뮤텍스와 같습니다.

세마포어는 파일시스템 상 파일형태로 존재, 뮤텍스는 프로세스 범위입니다.

즉, 프로세스가 사라질 때 뮤텍스는 clean up 됩니다.

세마포어는 소유할 수 없는 반면, 뮤텍스는 소유할 수 있습니다.

뮤텍스의 경우, 뮤텍스를 소유하고 있는 쓰레드가 이 뮤텍스를 해제할 수 있습니다.

반면, 세마포어의 경우, 세마포어를 소유하고 있지 않은 쓰레드도 이 세마포어를 해제할 수

있습니다.
```
